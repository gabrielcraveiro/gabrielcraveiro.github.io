<!DOCTYPE html><html><head><title>JS Garcia 2</title><meta charset='utf-8'><link href='https://d31qtcb7c58z3n.cloudfront.net/res-min/themes/marxico.css' rel='stylesheet'><style>
.note-content  {font-family: "Helvetica Neue", Arial, "Hiragino Sans GB", STHeiti, "Microsoft YaHei", "WenQuanYi Micro Hei", SimSun, Song, sans-serif;}

</style></head><body><div id='preview-contents' class='note-content'>
                        
                    



<h5 id="js-garcia-2"><span id="titulo2">JS Garcia 2 </span></h5>

<p></p>



<h5 id="links-úteis"><span id="titulo2">Links úteis</span></h5>

<ul><li><a href="https://watchandcode.com/courses/practical-javascript/lectures/900207" target="_blank">Watch and Code - Javascript</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS/blob/master/up%20%26%20going/ch1.md" target="_blank">You don’t know JS</a></li>
<li><a href="https://ide.c9.io/romefeller/jsaula0" target="_blank">C9 Garcia</a></li>
</ul>



<h5 id="estudar"><span id="titulo">Estudar</span></h5>



<h4 id="aula-08"><span id="titulo">Aula 08</span></h4>

<hr>

<p><strong>Um pouco de programação funcional</strong> :</p>

<p>A função é vista como valor qualquer</p>

<p>High-order functions, funções anonimas ou lambdas</p>

<p>São funções que recebem outras funções como parâmetro, a função não é algo global, ela não tem nome, é uma alma sendo colocada a um corpo.</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs actionscript"><span class="hljs-comment line-number">1.</span><span class="hljs-comment">//local</span><br><span class="hljs-comment line-number">2.</span><span class="hljs-keyword">var</span> soma = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x,y)</span> </span>{<br><span class="hljs-comment line-number">3.</span>    <span class="hljs-keyword">return</span> x+y;<br><span class="hljs-comment line-number">4.</span>}<br><span class="hljs-comment line-number">5.</span><br><span class="hljs-comment line-number">6.</span>isso é equivalente a :<br><span class="hljs-comment line-number">7.</span><br><span class="hljs-comment line-number">8.</span><span class="hljs-comment">//essa é global</span><br><span class="hljs-comment line-number">9.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">soma</span><span class="hljs-params">(x,y)</span> </span>{<br><span class="hljs-comment line-number">10.</span><span class="hljs-keyword">return</span> x+y;<br><span class="hljs-comment line-number">11.</span>}<br></code></pre>

<p><strong>Exemplos em aula</strong></p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs actionscript"><span class="hljs-comment line-number">1.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mult</span><span class="hljs-params">(x,y)</span> </span>{<br><span class="hljs-comment line-number">2.</span><span class="hljs-keyword">return</span> x*y<br><span class="hljs-comment line-number">3.</span>}<br><span class="hljs-comment line-number">4.</span><br><span class="hljs-comment line-number">5.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">teste</span><span class="hljs-params">()</span> </span>{<br><span class="hljs-comment line-number">6.</span>    <span class="hljs-keyword">var</span> soma = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x,y)</span> </span>{<br><span class="hljs-comment line-number">7.</span>        <span class="hljs-keyword">return</span> x+y;<br><span class="hljs-comment line-number">8.</span>    }<br><span class="hljs-comment line-number">9.</span>    <span class="hljs-comment">//Renomear uma função</span><br><span class="hljs-comment line-number">10.</span>    <span class="hljs-keyword">var</span> algo = mult;<br><span class="hljs-comment line-number">11.</span>    alert(algo(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>))<br><span class="hljs-comment line-number">12.</span>}<br></code></pre>

<p>Somar um:</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs actionscript"><span class="hljs-comment line-number">1.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hof</span><span class="hljs-params">(f,x)</span></span>{<br><span class="hljs-comment line-number">2.</span>    <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + f(x);<br><span class="hljs-comment line-number">3.</span>}<br><span class="hljs-comment line-number">4.</span><br><span class="hljs-comment line-number">5.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dobro</span><span class="hljs-params">(x)</span></span>{<br><span class="hljs-comment line-number">6.</span>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*x;<br><span class="hljs-comment line-number">7.</span>}<br><span class="hljs-comment line-number">8.</span><br><span class="hljs-comment line-number">9.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">teste</span><span class="hljs-params">()</span></span>{<br><span class="hljs-comment line-number">10.</span>    <span class="hljs-keyword">var</span> somarUm = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span></span>{<br><span class="hljs-comment line-number">11.</span>        <span class="hljs-keyword">return</span> x+<span class="hljs-number">1</span>;<br><span class="hljs-comment line-number">12.</span>    };<br><span class="hljs-comment line-number">13.</span><br><span class="hljs-comment line-number">14.</span>    alert(hof(dobro, <span class="hljs-number">5</span>));<br><span class="hljs-comment line-number">15.</span>    alert(hof(somarUm, <span class="hljs-number">2</span>));<br><span class="hljs-comment line-number">16.</span>    alert(hof(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span></span>{<br><span class="hljs-comment line-number">17.</span>        <span class="hljs-keyword">return</span> x<span class="hljs-number">-3</span>;<br><span class="hljs-comment line-number">18.</span>    }, <span class="hljs-number">2</span>));<br><span class="hljs-comment line-number">19.</span>}<br></code></pre>

<p><strong>Currying</strong> : Ato de passar menos parametros para uma função, essa função se torna uma hof e deve retornar uma outra função contendo os parametros deixados para fora</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs actionscript"><span class="hljs-comment line-number">1.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">somaCurr</span><span class="hljs-params">(x)</span></span>{<br><span class="hljs-comment line-number">2.</span>    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(y)</span></span>{<br><span class="hljs-comment line-number">3.</span>        <span class="hljs-keyword">return</span> x+y;<br><span class="hljs-comment line-number">4.</span>    };<br><span class="hljs-comment line-number">5.</span>}<br><span class="hljs-comment line-number">6.</span><br><span class="hljs-comment line-number">7.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">teste</span><span class="hljs-params">()</span></span>{<br><span class="hljs-comment line-number">8.</span>    <span class="hljs-comment">//somaCurr vira então a função de dentro que quando invocada retorna o segundo valor</span><br><span class="hljs-comment line-number">9.</span>    <span class="hljs-keyword">var</span> z = somaCurr(<span class="hljs-number">2</span>);<br><span class="hljs-comment line-number">10.</span>    alert(z);<br><span class="hljs-comment line-number">11.</span>}<br></code></pre>

<p><strong>Loop funcional</strong> : se vc consegue imaginar o que acontece para um elemento do vetor basta. O loop funcional leva aquilo para o resto, basta você pensar para um elemento. Pensar no vetor como um todo. </p>

<p>Loops funcionais: Map, filter, reduce</p>

<p><strong>Map</strong> : É uma high-order function que recebe uma função f e um vetor[v1,v2,v3…vn] e retorna o seguinte array [f(v1),f(v2),f(v3),f(vn)]. Uso v.map(function(parametro)) {}</p>

<p>Ele carrega o parametro para todo mundo dentro do vetor </p>

<p>Ex: </p>

<blockquote>
  <p>Uma função que dobre todos os elementos de um vetor</p>
</blockquote>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs actionscript"><span class="hljs-comment line-number">1.</span><span class="hljs-comment">//maneira convencional</span><br><span class="hljs-comment line-number">2.</span><br><span class="hljs-comment line-number">3.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dobraTodos</span><span class="hljs-params">(v)</span></span>{<br><span class="hljs-comment line-number">4.</span>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> v){<br><span class="hljs-comment line-number">5.</span>        v[i] = <span class="hljs-number">2</span>*v[i];<br><span class="hljs-comment line-number">6.</span>    }<br><span class="hljs-comment line-number">7.</span>    <span class="hljs-keyword">return</span> v;<br><span class="hljs-comment line-number">8.</span>}<br><span class="hljs-comment line-number">9.</span><br><span class="hljs-comment line-number">10.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">teste</span><span class="hljs-params">()</span></span>{<br><span class="hljs-comment line-number">11.</span>    alert(dobraTodos([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>]));<br><span class="hljs-comment line-number">12.</span>}<br><span class="hljs-comment line-number">13.</span><br><span class="hljs-comment line-number">14.</span><span class="hljs-comment">//Maneira funcional</span><br><span class="hljs-comment line-number">15.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dobraF</span><span class="hljs-params">(v)</span> </span>{<br><span class="hljs-comment line-number">16.</span>    <span class="hljs-keyword">return</span> v.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span> </span>{<br><span class="hljs-comment line-number">17.</span>        <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>*x;<br><span class="hljs-comment line-number">18.</span>    });<br><span class="hljs-comment line-number">19.</span>}<br></code></pre>

<blockquote>
  <p>Mapear a raiz</p>
</blockquote>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs go"><span class="hljs-comment line-number">1.</span><span class="hljs-keyword">var</span> numbers = [<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">9</span>];<br><span class="hljs-comment line-number">2.</span><span class="hljs-keyword">var</span> roots = numbers.<span class="hljs-keyword">map</span>(Math.sqrt);<br><span class="hljs-comment line-number">3.</span><span class="hljs-comment">// roots é [1, 2, 3], numbers ainda é [1, 4, 9]</span><br></code></pre>

<blockquote>
  <p>Mostre a palavra par se um numero é par e impar se for impar</p>
</blockquote>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs actionscript"><span class="hljs-comment line-number">1.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mostraPar</span><span class="hljs-params">(v)</span> </span>{<br><span class="hljs-comment line-number">2.</span>  <span class="hljs-keyword">return</span> v.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span> </span>{<br><span class="hljs-comment line-number">3.</span>    <span class="hljs-keyword">if</span> (x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>) {<br><span class="hljs-comment line-number">4.</span>      <span class="hljs-keyword">return</span> <span class="hljs-string">"PAR"</span>;<br><span class="hljs-comment line-number">5.</span>    } <span class="hljs-keyword">else</span> {<br><span class="hljs-comment line-number">6.</span>      <span class="hljs-keyword">return</span> <span class="hljs-string">"IMPAR"</span>;<br><span class="hljs-comment line-number">7.</span>    }<br><span class="hljs-comment line-number">8.</span>  })<br><span class="hljs-comment line-number">9.</span>}<br></code></pre>

<blockquote>
  <p>Reverter lista usando map</p>
</blockquote>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs actionscript"><span class="hljs-comment line-number">1.</span><span class="hljs-comment">//Sempre está forma !!!</span><br><span class="hljs-comment line-number">2.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reverterTodos</span><span class="hljs-params">(v)</span> </span>{<br><span class="hljs-comment line-number">3.</span>    <span class="hljs-keyword">return</span> v.map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(x)</span> </span>{<br><span class="hljs-comment line-number">4.</span>        <span class="hljs-keyword">return</span> x.split(<span class="hljs-string">''</span>).reverse().join(<span class="hljs-string">""</span>))(x);<br><span class="hljs-comment line-number">5.</span>    }) <br><span class="hljs-comment line-number">6.</span>}<br></code></pre>

<p><strong>for each</strong></p>

<p>pega uma lista e não devolve nada, executa uma ação em cada elemento do vetor</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs php"><span class="hljs-comment line-number">1.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mostrarTodos</span><span class="hljs-params">(v)</span> </span>{<br><span class="hljs-comment line-number">2.</span>    v.<span class="hljs-keyword">forEach</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(x)</span> </span>{<br><span class="hljs-comment line-number">3.</span>      alert(x)<br><span class="hljs-comment line-number">4.</span><br><span class="hljs-comment line-number">5.</span>    })<br><span class="hljs-comment line-number">6.</span><br><span class="hljs-comment line-number">7.</span>    ou trocar pela variavel, toda função tem um nome, esse nome é uma variavel <span class="hljs-keyword">global</span><br><span class="hljs-comment line-number">8.</span>    (eta redução?)<br><span class="hljs-comment line-number">9.</span>    v.<span class="hljs-keyword">forEach</span>(alert);<br><span class="hljs-comment line-number">10.</span>}<br><span class="hljs-comment line-number">11.</span><br><span class="hljs-comment line-number">12.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">teste</span><span class="hljs-params">()</span> </span>{<br><span class="hljs-comment line-number">13.</span>    mostrarTodos([<span class="hljs-number">1</span>,<span class="hljs-string">"ola"</span>,<span class="hljs-keyword">true</span>,<span class="hljs-number">5.5</span>])<br><span class="hljs-comment line-number">14.</span>}<br></code></pre>

<p>Para usar map e forEach com dom, vc precisa transformar objeto em array, para isso você precisa usar o slice</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs javascript"><span class="hljs-comment line-number">1.</span>ex01<br><span class="hljs-comment line-number">2.</span><br><span class="hljs-comment line-number">3.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pintarDivsAzul</span>(<span class="hljs-params">v</span>) </span>{<br><span class="hljs-comment line-number">4.</span>    v.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{<br><span class="hljs-comment line-number">5.</span>        x.style.background = <span class="hljs-string">"pink"</span>;<br><span class="hljs-comment line-number">6.</span>    })<br><span class="hljs-comment line-number">7.</span>}<br><span class="hljs-comment line-number">8.</span><br><span class="hljs-comment line-number">9.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">teste</span>(<span class="hljs-params"></span>) </span>{<br><span class="hljs-comment line-number">10.</span>    <span class="hljs-comment">//Divs é um objeto =&gt; não é um array</span><br><span class="hljs-comment line-number">11.</span>    <span class="hljs-keyword">var</span> divs = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">"div"</span>);<br><span class="hljs-comment line-number">12.</span>    <span class="hljs-comment">//Transforma objetos em arrays, ele ignora os campos nao inteiros</span><br><span class="hljs-comment line-number">13.</span>    <span class="hljs-keyword">var</span> divsArr = <span class="hljs-built_in">Array</span>.prototype.slice.call(divs);<br><span class="hljs-comment line-number">14.</span>    pintarDivsAzul(divsArr)<br><span class="hljs-comment line-number">15.</span>}<br><span class="hljs-comment line-number">16.</span><br><span class="hljs-comment line-number">17.</span>ex02<br><span class="hljs-comment line-number">18.</span><br><span class="hljs-comment line-number">19.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">PSOkay</span>(<span class="hljs-params">v</span>) </span>{<br><span class="hljs-comment line-number">20.</span>    v.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{<br><span class="hljs-comment line-number">21.</span>        x.innerHTML = <span class="hljs-string">"ok"</span>;<br><span class="hljs-comment line-number">22.</span>    })<br><span class="hljs-comment line-number">23.</span>}<br><span class="hljs-comment line-number">24.</span><br><span class="hljs-comment line-number">25.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">teste</span>(<span class="hljs-params"></span>) </span>{<br><span class="hljs-comment line-number">26.</span>    <span class="hljs-comment">//Divs é um objeto =&gt; não é um array</span><br><span class="hljs-comment line-number">27.</span>    <span class="hljs-keyword">var</span> ps = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">"p"</span>);<br><span class="hljs-comment line-number">28.</span>    <span class="hljs-comment">//Transforma objetos em arrays, ele ignora os campos nao inteiros</span><br><span class="hljs-comment line-number">29.</span>    <span class="hljs-keyword">var</span> psArr = <span class="hljs-built_in">Array</span>.prototype.slice.call(ps);<br><span class="hljs-comment line-number">30.</span>    PSOkay(psArr)<br><span class="hljs-comment line-number">31.</span>}<br><span class="hljs-comment line-number">32.</span><br><span class="hljs-comment line-number">33.</span>ex03<br><span class="hljs-comment line-number">34.</span><br><span class="hljs-comment line-number">35.</span><br><span class="hljs-comment line-number">36.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">tresAcoes</span>(<span class="hljs-params">v</span>) </span>{<br><span class="hljs-comment line-number">37.</span>    v.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) </span>{<br><span class="hljs-comment line-number">38.</span>        x.innerHTML = <span class="hljs-string">"visitado"</span>;<br><span class="hljs-comment line-number">39.</span>        x.style.background = <span class="hljs-string">"yellow"</span>;<br><span class="hljs-comment line-number">40.</span>        x.classList.add(<span class="hljs-string">"class1"</span>);<br><span class="hljs-comment line-number">41.</span>    })<br><span class="hljs-comment line-number">42.</span>}<br><span class="hljs-comment line-number">43.</span><br><span class="hljs-comment line-number">44.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">teste</span>(<span class="hljs-params"></span>) </span>{<br><span class="hljs-comment line-number">45.</span>    <span class="hljs-comment">//Mude o conteudo para visitado, pinte de amarelo e coloque uma </span><br><span class="hljs-comment line-number">46.</span>    <span class="hljs-comment">//classe chamada classe1</span><br><span class="hljs-comment line-number">47.</span>    <span class="hljs-keyword">var</span> ps = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">"p,div"</span>);<br><span class="hljs-comment line-number">48.</span>    <span class="hljs-comment">//Transforma objetos em arrays, ele ignora os campos nao inteiros</span><br><span class="hljs-comment line-number">49.</span>    <span class="hljs-keyword">var</span> psArr = <span class="hljs-built_in">Array</span>.prototype.slice.call(ps);<br><span class="hljs-comment line-number">50.</span>    tresAcoes(psArr)<br><span class="hljs-comment line-number">51.</span>}<br></code></pre>

<p>Não se usa mais onclick, é antiquado, o ideal é usar uma função main() {} usando do addEventListener</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs javascript"><span class="hljs-comment line-number">1.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>) </span>{<br><span class="hljs-comment line-number">2.</span>    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"botao"</span>).addEventListener(<span class="hljs-string">"click"</span>,teste)<br><span class="hljs-comment line-number">3.</span>}<br><span class="hljs-comment line-number">4.</span><br><span class="hljs-comment line-number">5.</span>ou<br><span class="hljs-comment line-number">6.</span><br><span class="hljs-comment line-number">7.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>) </span>{<br><span class="hljs-comment line-number">8.</span>    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"botao"</span>).addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br><span class="hljs-comment line-number">9.</span>        <span class="hljs-comment">//Mude o conteudo para visitado, pinte de amarelo e coloque uma </span><br><span class="hljs-comment line-number">10.</span>        <span class="hljs-comment">//classe chamada classe1</span><br><span class="hljs-comment line-number">11.</span>        <span class="hljs-keyword">var</span> ps = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">"p,div"</span>);<br><span class="hljs-comment line-number">12.</span>        <span class="hljs-comment">//Transforma objetos em arrays, ele ignora os campos nao inteiros</span><br><span class="hljs-comment line-number">13.</span>        <span class="hljs-keyword">var</span> psArr = <span class="hljs-built_in">Array</span>.prototype.slice.call(ps);<br><span class="hljs-comment line-number">14.</span>        tresAcoes(psArr) <br><span class="hljs-comment line-number">15.</span>    })<br><span class="hljs-comment line-number">16.</span>}<br><span class="hljs-comment line-number">17.</span><br><span class="hljs-comment line-number">18.</span><br><span class="hljs-comment line-number">19.</span><span class="hljs-built_in">window</span>.onload = main;<br></code></pre>

<p><strong>filter</strong> : lembra o map, mas ele tem uma diferença, ele retorna boolean, quem tiver falso ele tira da lista (é o for com if)</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs javascript"><span class="hljs-comment line-number">1.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filtrar</span>(<span class="hljs-params">v</span>) </span>{<br><span class="hljs-comment line-number">2.</span>    <span class="hljs-keyword">return</span> v.filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>{<br><span class="hljs-comment line-number">3.</span>    <span class="hljs-comment">//diferente de div3, remove por exemplo o div3 da pagina</span><br><span class="hljs-comment line-number">4.</span>        <span class="hljs-keyword">return</span> x.innerHTML != <span class="hljs-string">"DIV3"</span>;<br><span class="hljs-comment line-number">5.</span>    })<br><span class="hljs-comment line-number">6.</span>}<br><span class="hljs-comment line-number">7.</span><br><span class="hljs-comment line-number">8.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>) </span>{<br><span class="hljs-comment line-number">9.</span>    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"botao"</span>).addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{<br><span class="hljs-comment line-number">10.</span>        <span class="hljs-comment">//Mude o conteudo para visitado, pinte de amarelo e coloque uma </span><br><span class="hljs-comment line-number">11.</span>        <span class="hljs-comment">//classe chamada classe1</span><br><span class="hljs-comment line-number">12.</span>        <span class="hljs-keyword">var</span> ps = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">"p,div"</span>);<br><span class="hljs-comment line-number">13.</span>        <span class="hljs-comment">//Transforma objetos em arrays, ele ignora os campos nao inteiros</span><br><span class="hljs-comment line-number">14.</span>        <span class="hljs-keyword">var</span> psArr = <span class="hljs-built_in">Array</span>.prototype.slice.call(ps);<br><span class="hljs-comment line-number">15.</span>        <span class="hljs-comment">//Assume que pintarAzul e filtrar são funções globais</span><br><span class="hljs-comment line-number">16.</span>        <span class="hljs-comment">//pintarAzul(filtrar(divpsArr));</span><br><span class="hljs-comment line-number">17.</span>        divpsArr<br><span class="hljs-comment line-number">18.</span>            .filter(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>{<br><span class="hljs-comment line-number">19.</span>                <span class="hljs-keyword">return</span> x.innerHTML != <span class="hljs-string">"div3"</span>;<br><span class="hljs-comment line-number">20.</span>            })        <br><span class="hljs-comment line-number">21.</span>            .forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) </span>{<br><span class="hljs-comment line-number">22.</span>                x.style.backgroundColor = <span class="hljs-string">"blue"</span>;<br><span class="hljs-comment line-number">23.</span>            })<br><span class="hljs-comment line-number">24.</span>    })<br><span class="hljs-comment line-number">25.</span>}<br></code></pre>

<p><strong>Reduce</strong> : generalização de contadores e acomuladores, ele pega uma lista e reduz para um elemento</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs lsl"><span class="hljs-comment line-number">1.</span><span class="hljs-comment">//Por função</span><br><span class="hljs-comment line-number">2.</span><br><span class="hljs-comment line-number">3.</span>function somar(v) {<br><span class="hljs-comment line-number">4.</span>    <span class="hljs-comment">//dois argumentos, o primeiro é a função com 2 argumentos e o segundo é o valor inicial do acomulador</span><br><span class="hljs-comment line-number">5.</span>    <span class="hljs-comment">//O soma dentro do function é o contador ou acomulador, o vi é o elemento do vetor</span><br><span class="hljs-comment line-number">6.</span>    return v.reduce(function(soma,vi) {<br><span class="hljs-comment line-number">7.</span>            return soma + vi;<br><span class="hljs-comment line-number">8.</span>    },<span class="hljs-number">0</span>)<br><span class="hljs-comment line-number">9.</span>}<br><span class="hljs-comment line-number">10.</span><br><span class="hljs-comment line-number">11.</span>v = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>];<br><span class="hljs-comment line-number">12.</span><span class="hljs-number">1</span>) soma = <span class="hljs-number">0</span>, vi = <span class="hljs-number">1</span>, v = [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br><span class="hljs-comment line-number">13.</span><span class="hljs-number">2</span>) soma = <span class="hljs-number">0</span>+<span class="hljs-number">1</span>, vi = <span class="hljs-number">2</span>, v = [<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br><span class="hljs-comment line-number">14.</span><span class="hljs-number">3</span>) soma = <span class="hljs-number">1</span>+<span class="hljs-number">2</span>, vi = <span class="hljs-number">3</span>, v = [<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br><span class="hljs-comment line-number">15.</span><span class="hljs-number">4</span>) soma = <span class="hljs-number">3</span>+<span class="hljs-number">3</span>, vi = <span class="hljs-number">4</span>, v = [<span class="hljs-number">5</span>]<br><span class="hljs-comment line-number">16.</span><span class="hljs-number">5</span>) soma = <span class="hljs-number">6</span>+<span class="hljs-number">4</span>, vi = <span class="hljs-number">5</span>, v = []<br><span class="hljs-comment line-number">17.</span><span class="hljs-number">6</span>) retorna <span class="hljs-number">10</span>+<span class="hljs-number">5</span> = <span class="hljs-number">15</span><br><span class="hljs-comment line-number">18.</span><br><span class="hljs-comment line-number">19.</span><span class="hljs-comment">//Jeito antigo</span><br><span class="hljs-comment line-number">20.</span><br><span class="hljs-comment line-number">21.</span>function somar(v) {<br><span class="hljs-comment line-number">22.</span>var soma = <span class="hljs-number">0</span>;<br><span class="hljs-comment line-number">23.</span>    for (var i = <span class="hljs-number">0</span>; i &lt; v.length; i++) {<br><span class="hljs-comment line-number">24.</span>        soma = soma + v[i];<br><span class="hljs-comment line-number">25.</span>    }   <br><span class="hljs-comment line-number">26.</span>}<br></code></pre>

<p>Ultimo exemplo: transformar uma array de objetos em um só</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs javascript"><span class="hljs-comment line-number">1.</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">main</span>(<span class="hljs-params"></span>)</span>{<br><span class="hljs-comment line-number">2.</span>    <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">"#btn1"</span>).addEventListener(<span class="hljs-string">"click"</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{<br><span class="hljs-comment line-number">3.</span>        <span class="hljs-keyword">var</span> divps = <span class="hljs-built_in">document</span>.querySelectorAll(<span class="hljs-string">"div, p"</span>);<br><span class="hljs-comment line-number">4.</span>        <span class="hljs-keyword">var</span> divpsArr = <span class="hljs-built_in">Array</span>.prototype.slice.call(divps);<br><span class="hljs-comment line-number">5.</span>        <span class="hljs-keyword">var</span> ret = divpsArr<br><span class="hljs-comment line-number">6.</span>            .map(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>)</span>{<br><span class="hljs-comment line-number">7.</span>                <span class="hljs-keyword">return</span> x.innerHTML;<br><span class="hljs-comment line-number">8.</span>            })<br><span class="hljs-comment line-number">9.</span>            .reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">aux,vi</span>)</span>{<br><span class="hljs-comment line-number">10.</span>                <span class="hljs-keyword">return</span> aux + vi; <br><span class="hljs-comment line-number">11.</span>            },<span class="hljs-string">""</span>);<br><span class="hljs-comment line-number">12.</span>        alert(ret);<br><span class="hljs-comment line-number">13.</span>    });<br><span class="hljs-comment line-number">14.</span>}<br></code></pre>

<ol><li rel="1"><p><strong>map</strong> : um vetor chama o map e ele vai retornar um vetor com cada elemento sendo argumento para a função. </p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs scheme"><span class="hljs-comment line-number">1.</span>[<span class="hljs-name">v1</span>,v2,v3,v4,v5] =&gt; [<span class="hljs-name">f</span>(<span class="hljs-name">v1</span>),f(<span class="hljs-name">v2</span>),f(<span class="hljs-name">v3</span>),f(<span class="hljs-name">v4</span>),f(<span class="hljs-name">v5</span>)]<br></code></pre></li>
<li rel="2"><p><strong>slice</strong>: transforma um objeto em array</p></li>
<li rel="3"><p><strong>forEach</strong>: um veotr v chama o forEach, ele executa uma ação f em cada elemento de v. Não há retorno.</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs armasm"><span class="hljs-comment line-number">1.</span>[<span class="hljs-built_in">v1</span>,<span class="hljs-built_in">v2</span>,<span class="hljs-built_in">v3</span>,<span class="hljs-built_in">v4</span>,<span class="hljs-built_in">v5</span>] =&gt; ação em <span class="hljs-built_in">v1</span> <span class="hljs-title">|depois|</span> ação em <span class="hljs-built_in">v2</span>...<br></code></pre></li>
<li rel="4"><p><strong>filter</strong>: recebe uma função de retorno booleano e retorna uma lista aos quais o elemento cai na condição verdadeira</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs armasm"><span class="hljs-comment line-number">1.</span>[<span class="hljs-built_in">v1</span>,<span class="hljs-built_in">v2</span>,<span class="hljs-built_in">v3</span>,<span class="hljs-built_in">v4</span>] =&gt; [<span class="hljs-built_in">v2</span>,<span class="hljs-built_in">v4</span>]<br></code></pre></li>
<li rel="5"><p><strong>reduce</strong>: recebe uma função com dois parametros. Sendo o primeiro representar por contador/acomulador e o segundo sendo representado por um elemento da lista. A função interna retorna uma operação entre esses dois elementos</p>

<pre class="prettyprint with-line-number hljs-dark"><code class="hljs armasm"><span class="hljs-comment line-number">1.</span>[<span class="hljs-built_in">v1</span>,<span class="hljs-built_in">v2</span>,<span class="hljs-built_in">v3</span>,<span class="hljs-built_in">v4</span>] =&gt; r = aux <span class="hljs-title">|op|</span> <span class="hljs-built_in">v1</span> <span class="hljs-title">|op|</span> <span class="hljs-built_in">v2</span> <span class="hljs-title">|op|</span> <br></code></pre></li>
</ol></div></body></html>